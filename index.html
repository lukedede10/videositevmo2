<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>VMO2 Video Updates</title>

<style>
:root{
  --bg:#07121f;
  --card:#ffffff;
  --text:#0b1220;
  --muted:#475569;
  --o2:#005EB8;
  --o2dark:#004A93;
  --vmred:#E4002B;
  --radius:22px;
  --pad:18px;
  --shadow:0 20px 40px rgba(0,0,0,.35);
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  background:radial-gradient(1200px 600px at 50% -20%,#0b1f3a,var(--bg));
  color:#fff;
  overflow:hidden;
}

.track{
  height:100dvh;
  width:100vw;
  display:flex;
  overflow-x:auto;
  scroll-snap-type:x mandatory;
  scrollbar-width:none;
}
.track::-webkit-scrollbar{display:none}

.slide{
  flex:0 0 100%;
  height:100%;
  position:relative;
  scroll-snap-align:start;
  background:#000;
}

video{
  width:100%;
  height:100%;
  object-fit:cover;
}

.overlay{
  position:absolute;
  inset:0;
  pointer-events:none;
}

.header{
  position:absolute;
  top:env(safe-area-inset-top);
  left:0;
  right:0;
  padding:calc(var(--pad) + 8px) var(--pad);
  display:flex;
  align-items:center;
  gap:14px;
  justify-content:space-between;
}

.headerLeft{
  display:flex;
  align-items:center;
  gap:14px;
  min-width:0;
}

.logo{
  height:34px;
  width:auto;
  flex:0 0 auto;
}

.badge{
  background:rgba(255,255,255,.92);
  color:var(--text);
  padding:10px 14px;
  border-radius:999px;
  font-size:14px;
  font-weight:600;
  box-shadow:var(--shadow);
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  max-width:56vw;
}

.footer{
  position:absolute;
  bottom:calc(var(--pad) + env(safe-area-inset-bottom));
  left:var(--pad);
  right:var(--pad);
  display:flex;
  justify-content:space-between;
  align-items:flex-end;
  gap:12px;
}

.note{
  max-width:70%;
  background:rgba(255,255,255,.92);
  color:var(--muted);
  padding:14px 16px;
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  font-size:14px;
}

.controls{
  display:flex;
  flex-direction:column;
  gap:10px;
  pointer-events:auto;
}

.btn{
  border:none;
  background:linear-gradient(135deg,var(--o2),var(--o2dark));
  color:#fff;
  padding:12px 14px;
  border-radius:14px;
  font-size:14px;
  font-weight:600;
  cursor:pointer;
  box-shadow:var(--shadow);
}

.btn.alt{
  background:linear-gradient(135deg,var(--vmred),#b80022);
}

.btn.ghost{
  background:rgba(255,255,255,.16);
  backdrop-filter:blur(8px);
  -webkit-backdrop-filter:blur(8px);
}

.tap{
  position:absolute;
  inset:0;
  pointer-events:auto;
}

.lockBtnWrap{
  pointer-events:auto;
}

.lockScreen{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:24px;
  background:radial-gradient(1000px 500px at 50% -10%,#0b2a55,var(--bg));
  z-index:50;
}

.lockCard{
  width:min(520px,100%);
  background:rgba(255,255,255,.92);
  color:var(--text);
  border-radius:28px;
  box-shadow:var(--shadow);
  padding:22px;
}

.lockTop{
  display:flex;
  align-items:center;
  gap:12px;
  margin-bottom:12px;
}

.lockTop img{
  height:34px;
  width:auto;
}

.lockTitle{
  font-size:18px;
  font-weight:800;
  margin:0;
}

.lockSub{
  margin:8px 0 18px;
  color:var(--muted);
  font-size:14px;
  line-height:1.35;
}

.pinRow{
  display:flex;
  gap:10px;
}

.pinInput{
  flex:1;
  border:1px solid rgba(2,6,23,.18);
  border-radius:16px;
  padding:14px 14px;
  font-size:18px;
  outline:none;
}

.pinInput:focus{
  border-color:rgba(0,94,184,.6);
  box-shadow:0 0 0 4px rgba(0,94,184,.14);
}

.lockActions{
  display:flex;
  gap:10px;
  margin-top:12px;
}

.lockMsg{
  margin-top:12px;
  font-size:14px;
  color:var(--vmred);
  font-weight:700;
  min-height:18px;
}

.hidden{display:none !important}
</style>
</head>

<body>

<div id="track" class="track"></div>

<div id="lockScreen" class="lockScreen" role="dialog" aria-modal="true" aria-label="PIN entry">
  <div class="lockCard">
    <div class="lockTop">
      <img src="virginmediao2logo.png" alt="VMO2 logo" />
      <div>
        <p class="lockTitle">Protected content</p>
      </div>
    </div>
    <p class="lockSub">Enter the PIN to access internal video updates.</p>

    <div class="pinRow">
      <input id="pinInput" class="pinInput" inputmode="numeric" autocomplete="one-time-code" maxlength="8" placeholder="PIN" />
    </div>

    <div class="lockActions">
      <button id="unlockBtn" class="btn" type="button">Unlock</button>
      <button id="clearBtn" class="btn ghost" type="button">Clear</button>
    </div>

    <div id="lockMsg" class="lockMsg"></div>
  </div>
</div>

<script>
const PIN="8602";
const STORAGE_KEY="vmo2_video_unlocked_session";

const VIDEOS=[
  {src:"videos/video1.mp4",title:"Operational Update",note:"Key updates for this week"},
  {src:"videos/video2.mp4",title:"Safety Focus",note:"Important compliance reminder"},
  {src:"videos/video3.mp4",title:"Team Wins",note:"Great work across the region"}
];

const track=document.getElementById("track");
const lockScreen=document.getElementById("lockScreen");
const pinInput=document.getElementById("pinInput");
const unlockBtn=document.getElementById("unlockBtn");
const clearBtn=document.getElementById("clearBtn");
const lockMsg=document.getElementById("lockMsg");

function setLocked(locked){
  if(locked){
    sessionStorage.removeItem(STORAGE_KEY);
    lockScreen.classList.remove("hidden");
    lockMsg.textContent="";
    pinInput.value="";
    setTimeout(()=>pinInput.focus(),50);
    pauseAll();
  }else{
    sessionStorage.setItem(STORAGE_KEY,"1");
    lockScreen.classList.add("hidden");
    lockMsg.textContent="";
    const firstVideo=document.querySelector("video");
    if(firstVideo) firstVideo.play().catch(()=>{});
  }
}

function isUnlocked(){
  return sessionStorage.getItem(STORAGE_KEY)==="1";
}

function pauseAll(){
  document.querySelectorAll("video").forEach(v=>v.pause());
}

function goTo(i){
  const slides=track.children;
  if(!slides.length)return;
  const index=Math.max(0,Math.min(slides.length-1,i));
  slides[index].scrollIntoView({behavior:"smooth"});
}

function build(){
  VIDEOS.forEach((v,i)=>{
    const slide=document.createElement("section");
    slide.className="slide";

    const video=document.createElement("video");
    video.src=v.src;
    video.muted=true;
    video.playsInline=true;

    const tap=document.createElement("div");
    tap.className="tap";

    const overlay=document.createElement("div");
    overlay.className="overlay";

    const header=document.createElement("div");
    header.className="header";

    const headerLeft=document.createElement("div");
    headerLeft.className="headerLeft";

    const logo=document.createElement("img");
    logo.src="virginmediao2logo.png";
    logo.className="logo";
    logo.alt="VMO2 logo";

    const badge=document.createElement("div");
    badge.className="badge";
    badge.textContent=v.title;

    headerLeft.appendChild(logo);
    headerLeft.appendChild(badge);

    const lockWrap=document.createElement("div");
    lockWrap.className="lockBtnWrap";

    const lockBtn=document.createElement("button");
    lockBtn.className="btn ghost";
    lockBtn.type="button";
    lockBtn.textContent="Lock";
    lockBtn.onclick=()=>setLocked(true);

    lockWrap.appendChild(lockBtn);

    header.appendChild(headerLeft);
    header.appendChild(lockWrap);

    const footer=document.createElement("div");
    footer.className="footer";

    const note=document.createElement("div");
    note.className="note";
    note.textContent=v.note;

    const controls=document.createElement("div");
    controls.className="controls";

    const mute=document.createElement("button");
    mute.className="btn";
    mute.type="button";
    mute.textContent="Unmute";

    const next=document.createElement("button");
    next.className="btn alt";
    next.type="button";
    next.textContent="Next";

    controls.appendChild(mute);
    controls.appendChild(next);

    footer.appendChild(note);
    footer.appendChild(controls);

    overlay.appendChild(header);
    overlay.appendChild(footer);

    slide.appendChild(video);
    slide.appendChild(tap);
    slide.appendChild(overlay);

    let startX=0,startY=0;

    slide.addEventListener("touchstart",e=>{
      startX=e.touches[0].clientX;
      startY=e.touches[0].clientY;
    },{passive:true});

    slide.addEventListener("touchend",e=>{
      if(!isUnlocked()) return;
      const dx=e.changedTouches[0].clientX-startX;
      const dy=e.changedTouches[0].clientY-startY;
      if(Math.abs(dx)>Math.abs(dy)&&dx>60)goTo(i+1);
      if(Math.abs(dx)>Math.abs(dy)&&dx<-60)goTo(i-1);
    },{passive:true});

    tap.onclick=()=>{
      if(!isUnlocked()) return;
      video.paused?video.play().catch(()=>{}):video.pause();
    };

    mute.onclick=()=>{
      if(!isUnlocked()) return;
      video.muted=!video.muted;
      mute.textContent=video.muted?"Unmute":"Mute";
      video.play().catch(()=>{});
    };

    next.onclick=()=>{
      if(!isUnlocked()) return;
      goTo(i+1);
    };

    track.appendChild(slide);
  });
}

const observer=new IntersectionObserver(entries=>{
  entries.forEach(e=>{
    const v=e.target;
    if(!isUnlocked()){
      v.pause();
      return;
    }
    if(e.isIntersecting&&e.intersectionRatio>0.7){
      v.play().catch(()=>{});
    }else{
      v.pause();
    }
  });
},{threshold:[0.7]});

function wireLockUI(){
  function tryUnlock(){
    const val=(pinInput.value||"").trim();
    if(val===PIN){
      setLocked(false);
    }else{
      lockMsg.textContent="Incorrect PIN";
      pinInput.select();
    }
  }

  unlockBtn.addEventListener("click", tryUnlock);
  pinInput.addEventListener("keydown", (e)=>{
    if(e.key==="Enter") tryUnlock();
  });
  clearBtn.addEventListener("click", ()=>{
    pinInput.value="";
    lockMsg.textContent="";
    pinInput.focus();
  });
}

build();
document.querySelectorAll("video").forEach(v=>observer.observe(v));
wireLockUI();
goTo(0);

if(isUnlocked()){
  lockScreen.classList.add("hidden");
}else{
  setLocked(true);
}
</script>

</body>
</html>
